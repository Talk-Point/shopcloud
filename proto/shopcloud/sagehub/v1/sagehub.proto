// SageHub API
// To access the erp

syntax = "proto3";

package proto.shopcloud.sagehub.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

message UpdateMask {
    repeated string paths = 1;
}

// Generic
enum Operator {
    OPERATOR_EQUAL_UNSPECIFIED = 0;
    // OPERATOR_NOT_EQUAL = 1;
    OPERATOR_GREATER_THAN = 2;
    OPERATOR_GREATER_THAN_OR_EQUAL = 3;
    OPERATOR_LESS_THAN = 4;
    OPERATOR_LESS_THAN_OR_EQUAL = 5;
    // OPERATOR_IN = 6;
    // OPERATOR_NOT_IN = 7;
    // OPERATOR_LIKE = 8;
    // OPERATOR_NOT_LIKE = 9;
    // OPERATOR_IS_NULL = 10;
    // OPERATOR_IS_NOT_NULL = 11;
    OPERATOR_CONTAINS = 12;
    OPERATOR_ARRAY_CONTAINS = 13;
}

enum Direction {
    DIRECTION_ASC_UNSPECIFIED = 0;
    DIRECTION_DESC = 1;
}

// Scopes
enum Scope {
    SCOPE_UNSPECIFIED = 0;
    SCOPE_READ = 1;
    SCOPE_WRITE = 2;
    SCOPE_ADMIN = 3;
}

// Models
message ActionItem {
    string reference = 1;
    string value = 2;
}

message Action {
    enum Type {
        TYPE_ADD_UNSPECIFIED = 0;
        TYPE_UPDATE = 1;
        TYPE_DELETE = 2;
    }

    string id = 1;
    Type type = 2;
    string table = 3;
    repeated ActionItem items = 4;
    string by_user = 5;
    google.protobuf.Timestamp created_at = 6;
}

message ApiKey {
    string id = 1;
    string username = 2;
    string email = 3;
    repeated Scope scopes = 4;
    string secret = 5;
    google.protobuf.Timestamp created_at = 6;
    google.protobuf.Timestamp updated_at = 7;
}

message LBAmazonItem {
    int64 item_id = 1;
    int32 mandant = 2;
    string artikelnummer = 3;
    int64 auspraegung_id = 4;
    string title = 5;
    string sku = 6;
    string asin = 7;
    string marketplace_id = 8;
    int32 leadtime_to_ship = 9;
}

message Event {
    string id = 1;
    string ressource = 2;
    string reference = 3;
    string topic = 4;
    google.protobuf.Timestamp ttl = 5;
    google.protobuf.Timestamp created_at = 6;
}

message Feed {
    string id = 1;
    string supplier = 2;
    string name = 3;
    string source = 4;
    google.protobuf.Timestamp created_at = 5;
    google.protobuf.Timestamp update_at = 6;

    message HttpSource {
        string url = 1;
    }
    
    message FtpSource {
        string host = 1;
        int32 port = 2;
        string username = 3;
        string password = 4;
        string remote_path = 5;
    }
}

service SageHubService {
    // Info
    rpc Info(InfoRequest) returns (InfoResponse);

    // Actions
    rpc GetAction(GetActionRequest) returns (GetActionResponse);
    rpc ListActions(ListActionsRequest) returns (ListActionsResponse);

    // APIKeys
    rpc GetApiKey(GetApiKeyRequest) returns (GetApiKeyResponse);
    rpc ListApiKeys(ListApiKeysRequest) returns (ListApiKeysResponse);
    rpc CreateApiKey(CreateApiKeyRequest) returns (CreateApiKeyResponse);
    rpc DeleteApiKey(DeleteApiKeyRequest) returns (DeleteApiKeyResponse);
    rpc UpdateScopesByApiKey(UpdateScopesByApiKeyRequest) returns (UpdateScopesByApiKeyResponse);

    // Events
    rpc GetEvent(GetEventRequest) returns (GetEventResponse);
    rpc DeleteEvent(DeleteEventRequest) returns (DeleteEventResponse);
    rpc PushEvent(PushEventRequest) returns (PushEventResponse);

    // Amazon
    rpc GetAmazonItem(GetAmazonItemRequest) returns (GetAmazonItemResponse);
    rpc UpdateAmazonLeadTimes(UpdateAmazonLeadTimesRequest) returns (UpdateAmazonLeadTimesResponse);

    // VKBelege
    rpc GetVKBelegV2(GetVKBelegV2Request) returns (GetVKBelegV2Response);
    rpc ListVKBelegSalechannels(ListVKBelegSalechannelsRequest) returns (ListVKBelegSalechannelsResponse);
    // VKBelegEvents
    rpc FetchNewestVKBelegEvents(FetchNewestVKBelegEventsRequest) returns (FetchNewestVKBelegEventsResponse);
    rpc BatchEmitVKBelegEvents(BatchEmitVKBelegEventsRequest) returns (BatchEmitVKBelegEventsResponse);
    rpc EmitVKBelegEvents(EmitVKBelegEventsRequest) returns (EmitVKBelegEventsResponse);
    rpc ListVKBelegEvents(ListVKBelegEventsRequest) returns (ListVKBelegEventsResponse);
    rpc GetVKBelegEvent(GetVKBelegEventRequest) returns (GetVKBelegEventResponse);
    // VKBelegPulse
    rpc GetVKBelegPulse(GetVKBelegPulseRequest) returns (GetVKBelegPulseResponse);
    rpc ListVKBelegPositionsPulse(ListVKBelegPositionsPulseRequest) returns (ListVKBelegPositionsPulseResponse);

    // Feeds
    rpc GetFeed(GetFeedRequest) returns (GetFeedResponse);
    rpc GetFeedByName(GetFeedByNameRequest) returns (GetFeedByNameResponse);
    rpc ListFeeds(ListFeedsRequest) returns (ListFeedsResponse);
    rpc ListFeedFiles(ListFeedFilesRequest) returns (ListFeedFilesResponse);
    rpc CreateFeed(CreateFeedRequest) returns (CreateFeedResponse);
    rpc CreateFeedFile(CreateFeedFileRequest) returns (CreateFeedFileResponse);
    rpc DeleteFeed(DeleteFeedRequest) returns (DeleteFeedResponse);

    // Articles
    rpc ListArticles(ListArticlesRequest) returns (ListArticlesResponse);
    rpc GetArticleCoreData(GetArticleCoreDataRequest) returns (GetArticleCoreDataResponse);
    rpc GetArticleGtin(GetArticleGtinRequest) returns (GetArticleGtinResponse);
    rpc EnableArticle(EnableArticleRequest) returns (EnableArticleResponse);
    rpc DisableArticle(DisableArticleRequest) returns (DisableArticleResponse);
    rpc EnableShopArticle(EnableShopArticleRequest) returns (EnableShopArticleResponse);
    rpc DisableShopArticle(DisableShopArticleRequest) returns (DisableShopArticleResponse);
    rpc UpdateArticle(UpdateArticleRequest) returns (UpdateArticleResponse);
    // Articles Prices
    rpc ListArticlesPriceLists(ListArticlesPriceListsRequest) returns (ListArticlesPriceListsResponse);
    rpc GetArticlePrices(GetArticlePricesRequest) returns (GetArticlePricesResponse);
    rpc UpdateArticlePrice(UpdateArticlePriceRequest) returns (UpdateArticlePriceResponse);
    // Onlinbezeichner
    rpc GetArticleImage(GetArticleImageRequest) returns (GetArticleImageResponse);
}

message UpdateArticleRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;   
    string by_user = 4;

    // khkartikel
    string bezeichnung1 = 5;
    string bezeichnung2 = 6;
    string hersteller = 7;
    int32 nachweispflicht = 8;
    string user_soneparartikel = 9;
    double user_bestandsonepar = 10;
    string user_epartikel = 11;
    double user_bestandep = 12;
    string user_energieeffizienzklasse = 13;
    string user_versandklasse = 14;
    double user_preisermittlungszuschlag = 15;
    string user_zulieferercode = 16;
    string user_zuliefererartikelnummer = 17;
    double user_zuliefererbestand = 18;
    double laenge = 19;
    double breite = 20;
    double hoehe = 21;
    double umrechnungsfaktorgp = 22;
    string grundpreiseinheit = 23;
    double grundpreisbasis = 24;
    bool istfavorit = 25;

    // khkartikelvariante
    double gewicht = 26;
    double letzterek = 27;
    double mittlererek = 28;
    double kalkulatorischerek = 29;
    string eannummer = 30;

    UpdateMask update_mask = 31;
}

message UpdateArticleResponse {
    bool is_success = 1;
    repeated string queries = 2;
}

message EnableArticleRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    string by_user = 3;
}

message EnableArticleResponse {}

message DisableArticleRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    string by_user = 3;
}

message DisableArticleResponse {}

message EnableShopArticleRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;   
    string by_user = 4;
}

message EnableShopArticleResponse {}

message DisableShopArticleRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    string by_user = 4;
}

message DisableShopArticleResponse {}

message GetArticleGtinRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
}

message GetArticleGtinResponse {
    string gtin = 1;
}

message ArticleImage {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    string bild_1 = 4;
    string bild_2 = 5;
    string bild_3 = 6;
    string bild_4 = 7;
    string bild_5 = 8;
    string bild_6 = 9;
    string bild_7 = 10;
    string bild_8 = 11;
    string bild_9 = 12;
    string bild_10 = 13;
    string bild_11 = 14;
    string bild_12 = 15;
    string bild_13 = 16;
    string bild_14 = 17;
    string bild_15 = 18;
    string bild_16 = 19;
    string bild_17 = 20;
    string bild_18 = 21;
    string bild_19 = 22;
    string bild_20 = 23;
    string bild_21 = 24;
    string bild_22 = 25;
    string bild_23 = 26;
    string bild_24 = 27;
}

message GetArticleImageRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
}

message GetArticleImageResponse {
    ArticleImage article_image = 1;
}

message KhkArtikel {
    string artikelnummer = 1;
    int32 mandant = 2;
    string bezeichnung1 = 3;
    string bezeichnung2 = 4;
    string matchcode = 5;
    string langtext = 6;
    string dimensionstext = 7;
    string dimensionstexthtml = 8;
    string dimensionstextrtf = 9;
    string memo = 10;
    string artikelgruppe = 11;
    string ersatzartikelnummer = 12;
    string hersteller = 13;
    string hartikelnummer = 14;
    string steuerklasse = 15;
    string erloescode = 16;
    string wareneingangscode = 17;
    string wareneinsatzcode = 18;
    string warenbestandcode = 19;
    string sachkontovk = 20;
    string sachkontoek = 21;
    string sachkontowz = 22;
    string sachkontowb = 23;
    int32 isteinmalartikel = 24;
    int32 istprovisionierbar = 25;
    int32 nachweispflicht = 26;
    string verkaufsmengeneinheit = 27;
    string mengenberechnungvk = 28;
    int32 dezimalstellenvk = 29;
    double umrechnungsfaktorvk = 30;
    string verpackungseinheitvk = 31;
    double umrechnungsfaktorvpvk = 32;
    string preiseinheitvk = 33;
    string basismengeneinheit = 34;
    int32 dezimalstellenbasis = 35;
    string lagermengeneinheit = 36;
    int32 dezimalstellenlager = 37;
    double umrechnungsfaktorlme = 38;
    int32 lagerfuehrung = 39;
    int32 lagerplatzzuordnung = 40;
    string gewichtseinheit = 41;
    int32 preispflegeek = 42;
    int32 istbestellartikel = 43;
    int32 istverkaufsartikel = 44;
    int32 stuecklistentyp = 45;
    int32 istkundenkartei = 46;
    int32 istlieferantenkartei = 47;
    int32 istrabattfaehig = 48;
    double gemeinkostenzuschlag = 49;
    double bezugskostenzuschlag = 50;
    double gewinnzuschlag = 51;
    double bewertungssatz = 52;
    string kostenstelle = 53;
    string kostentraeger = 54;
    bool istfavorit = 55;
    int32 istvorlage = 56;
    int32 chargenpflicht = 57;
    string warennummer = 58;
    string ursprungsregion = 59;
    string bestimmungsregion = 60;
    string rabattgruppe = 61;
    double laenge = 62;
    double breite = 63;
    double hoehe = 64;
    string intrastatmengeneinheit = 65;
    double umrechnungsfaktorintrame = 66;
    int32 dezimalstellenintrame = 67;
    string hauptartikelgruppe = 68;
    string vaterartikelgruppe = 69;
    string grundpreiseinheit = 70;
    double umrechnungsfaktorgp = 71;
    double grundpreisbasis = 72;
    int32 platzid = 73;
    string entnahmeverfahren = 74;
    string variante = 75;
    int32 inventurmethode = 76;
    bool aktiv = 77;
    int32 artikelart = 78;
    string ressourcenref = 79;
    string zeichnungsnummer = 80;
    string gemeinkostenid = 81;
    double minimalelosgroesse = 82;
    double maximalelosgroesse = 83;
    int32 istfertigungsartikel = 84;
    int32 istunterbaugruppe = 85;
    int32 istersatzteil = 86;
    int32 istverschleissteil = 87;
    string schwundart = 88;
    double schwund = 89;
    int32 pkonfigistkonfigartikel = 90;
    string pkonfiganwendung = 91;
    int32 istfremdleistung = 92;
    double kalkulationslosgroesse = 93;
    string ursprungsland = 94;
    string statwerteingang = 95;
    string statwertversendung = 96;
    string eigenmasse = 97;
    string statverfahren = 98;
    int32 dezimalstellenpreis = 99;
    int32 verbrauchsteuer = 100;
    int32 besteuerungsart = 101;
    bytes timestamp = 102;
    string user_versandklasse = 103;
    string user_soneparartikel = 104;
    string user_exportb2b = 105;
    string user_topnew = 106;
    bool user_preisberechnung = 107;
    double user_preisermittlungszuschlag = 108;
    double user_preislistenfaktor = 109;
    string user_importid = 110;
    string user_zentraldispo = 111;
    double user_bestandsonepar = 112;
    string user_energieeffizienzklasse = 113;
    string user_meinpaketmarketplacecategorie = 114;
    string user_meinpaketvariantconfiguration = 115;
    string user_accessorieincart = 116;
    string user_360grad = 117;
    string user_schutzklickcategory = 118;
    bool user_bware = 119;
    string user_epartikel = 120;
    double user_bestandep = 121;
    string user_bwarelabel = 122;
    string langtexthtml = 123;
    string langtextrtf = 124;
    int32 herkunft = 125;
    int32 istskontierfaehig = 126;
    string user_autovergabesn = 127;
    string user_zulieferercode = 128;
    string user_zuliefererartikelnummer = 129;
    double user_zuliefererbestand = 130;
}

message KhkArtikelVariante {
    string artikelnummer = 1;
    int32 mandant = 2;
    int32 auspraegungid = 3;
    string eannummer = 4;
    string abcklasse = 5;
    double lagerbestand = 6;
    double lagerbestandohnedisp = 7;
    double lagerbestandverfuegbar = 8;
    double gewicht = 9;
    double gewichtlme = 10;
    double letzterek = 11;
    double mittlererek = 12;
    double kalkulatorischerek = 13;
    double letzterfek = 14;
    int32 hatzubehoer = 15;
    int32 earmeldepflicht = 16;
    string earregnr = 17;
    string earmarke = 18;
    string earkategorie = 19;
    string eargeraeteart = 20;
    string earproduktgruppe = 21;
    double eargewicht = 22;
    string user_hattekeinenlagerbestandvorwe = 23;
    string formelid = 24;
    string dispoformel = 25;
    double dispofaktor = 26;
    double bestellmenge = 27;
    int32 bestellzeitpunkt = 28;
    double meldebestand = 29;
    string hauptlieferant = 30;
    string letzterlieferant = 31;
    int32 wiederbeschaffungszeit = 32;
    int32 wsistwebshopartikel = 33;
    int32 wsistverkaufsartikel = 34;
    string wsterminverkaufab = 35;
    int32 wsistsichtbar = 36;
    int32 wsistneu = 37;
    string wsterminneubis = 38;
    int32 wslageranzeige = 39;
    int32 wszeigehersteller = 40;
    string wsguid = 41;
    int32 wsistgeaendert = 42;
    int32 wsisthauptbildgeaendert = 43;
    int32 wsistgaleriegeaendert = 44;
    string wsaktuelleshauptbild = 45;
    string wsaktuellegaleriebilder = 46;
    int32 wsiststandardvariante = 47;
    string wsterminverkaufbis = 48;
    double wsmindestbestellmenge = 49;
    double wsstaffelung = 50;
    bool user_scmpaktiv = 51;
    string lagermodulekbme = 52;
    string lagermodulvkbme = 53;
}

message KhkVariantenAuspraegungen {
    int32 mandant = 1;
    int32 auspraegung_id = 2;
    string variante = 3;
    string auspraegung1 = 4;
    string auspraegung2 = 5;
}

message GetArticleCoreDataRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
}

message GetArticleCoreDataResponse {
    KhkArtikel khk_artikel = 1;
    KhkArtikelVariante khk_artikel_variante = 2;
    KhkVariantenAuspraegungen khk_varianten_auspraegungen = 3;
}

message ListArticlesRequest {
    int32 mandant = 1;
    int32 page_size = 2;
    int32 page = 3;
    string search = 4;
}

message ListArtikel {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    string matchcode = 4;
    string bezeichnung1 = 5;
    string bezeichnung2 = 6;
    string variante = 7;
    string varianten_auspraegung = 8;
    string hersteller = 9;
    string versandklasse = 10;
    double lagerbestand_verfuegbar = 11;
    double letzter_ek = 12;
    double mittlerer_ek = 13;
    double kalkulatorischer_ek = 14;
    bool scmp_aktiv = 15;
    string zulieferer_code = 16;
    string zulieferer_artikelnummer = 17;
    double zulieferer_bestand = 18;
    bool aktiv = 19;
    string ean = 20;
}

message ListArticlesResponse {
    int32 mandant = 1;
    int32 page = 2;
    int32 page_size = 3;
    repeated ListArtikel items = 4;
}

message PriceList {
    int32 mandant = 1;
    int64 id = 2;
    string name = 3;
    string currency = 4;
    bool is_brutto_price = 5;
}

message ListArticlesPriceListsRequest {
    int32 mandant = 1;
    int32 page_size = 2;
    int32 page = 3;
}

message ListArticlesPriceListsResponse {
    repeated PriceList price_lists = 1;
}

message GetArticlePricesRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
}

message ArticlePrice {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    int64 list = 4;
    string list_name = 5;
    double price = 6;
    string currency = 7;
}

message GetArticlePricesResponse {
    repeated ArticlePrice prices = 1;
}

message UpdateArticlePriceRequest {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    int64 list = 4;
    double price = 5;
    string by_user_id = 6;
    string by_user_name = 7;
}

message UpdateArticlePriceResponse {}

message CreateFeedFileRequest {
    string feed = 1;
    string filename = 2;
    bytes content = 3;
}

message CreateFeedFileResponse {
    string uri = 1;
}

message GetFeedByNameRequest {
    string name = 1;
    string supplier = 2;
}

message GetFeedByNameResponse {
    Feed feed = 1;
}

message GetFeedRequest {
    string id = 1;
}

message GetFeedResponse {
    Feed feed = 1;
}

message ListFeedsFilter {
    enum Field {
        FIELD_ID_UNSPECIFIED = 0;
        FIELD_NAME = 1;
        FIELD_CREATED_AT = 2;
    }

    Field field = 1;
    string value = 2;
    Operator operator = 3;
}

message ListFeedsRequest {
    enum OrderBy {
        ORDER_BY_ID_UNSPECIFIED = 0;
        ORDER_BY_CREATED_AT = 1;
    }

    int32 page_size = 1;
    string page_next = 2;
    string page_previous = 3;
    OrderBy order_by = 4;
    Direction direction = 5;
    repeated ListFeedsFilter filters = 6;
}

message ListFeedsResponse {
    repeated Feed feeds = 1;
    string page_token = 2;
}

message ListFeedFilesRequest {
    string id = 1;
    string date_suffix = 2;
}

message ListFeedFilesResponse {
    repeated string uris = 1;
}

message CreateFeedRequest {
    string supplier = 1;
    string name = 2;
    oneof source {
        Feed.HttpSource http = 3;
        Feed.FtpSource ftp = 4;
    }
}

message CreateFeedResponse {
    Feed feed = 1;
}

message DeleteFeedRequest {
    string id = 1;
}

message DeleteFeedResponse {
    Feed feed = 1;
}

enum VKBelegart {
    VK_BELEGART_UNSPECIFIED = 0;
    VK_BELEGART_AUFTRAGSBESTAETIGUNG = 1;
    VK_BELEGART_KOMMISSIONIERAUFTRAG = 2;
    VK_BELEGART_KOMMISSIONIERRECHNUNG = 3;
    VK_BELEGART_SOFORTRECHNUNG = 4;
    VK_BELEGART_RECHNUNG = 5;
    VK_BELEGART_SOFORTSTORNORECHNUNG = 6;
    VK_BELEGART_LIEFERSCHEIN = 7;
    VK_BELEGART_KOMMISSIONIERLIEFERSCHEIN = 8;
    VK_BELEGART_STORNORECHNUNG = 9;
    VK_BELEGART_GUTSCHRIFT = 10;
    VK_BELEGART_RUECKLIEFERSCHEIN = 11;
    VK_BELEGART_KOMMISSIONIERABSCHLUSSLIEFERSCHEIN = 12;
    VK_BELEGART_STRECKENLIEFERSCHEIN = 13;
    VK_BELEGART_ANGEBOT = 14;
    VK_BELEGART_STRECKENRUECKLIEFERSCHEIN = 15;
    VK_BELEGART_DIREKTRECHNUNG = 16;
    VK_BELEGART_PROFORMARECHNUNG = 17;
    VK_BELEGART_STRECKENSOFORTRECHNUNG = 18;
    VK_BELEGART_FILIAL_LIEFERSCHEIN = 19;
    VK_BELEGART_STRECKENSOFORTSTORNORECHNUNG = 20;
    VK_BELEGART_SOFORTAUFTRAG = 21;
    VK_BELEGART_FILIAL_AUFTRAGSBESTAETIGUNG = 22;
    VK_BELEGART_SAMMELRECHNUNG = 23;
    VK_BELEGART_MUSTERBELEG = 24;
}

enum TimeFramePreset {
    TIME_FRAME_PRESET_TODAY_UNSPECIFIED = 0;
    TIME_FRAME_PRESET_YESTERDAY = 1;
    TIME_FRAME_PRESET_THIS_MONTH = 2;
    TIME_FRAME_PRESET_LAST_MONTH = 3;
    TIME_FRAME_PRESET_LAST_7_DAYS = 4;
    TIME_FRAME_PRESET_LAST_14_DAYS = 5;
    TIME_FRAME_PRESET_LAST_30_DAYS = 6;
    TIME_FRAME_PRESET_LAST_90_DAYS = 7;
    TIME_FRAME_PRESET_LAST_365_DAYS = 8;
}

message BatchEmitVKBelegEventsRequest {
    int32 mandant = 1;
    repeated int64 bel_ids = 2;
}

message BatchEmitVKBelegEventsResponse {
    int64 success_total = 1;
    repeated string bel_ids_with_error = 2;
}

message TimeRange {
    string start_at = 1; // ISO 8601 format
    string end_at = 2; // ISO 8601 format
}

message ListVKBelegSalechannelsRequest {
    int32 page = 1;
    int32 page_size = 2;
    int32 mandant = 3;
    string search = 4;
}

message SalechannelItem {
    int32 mandant = 1;
    string code = 2;
    string name = 3;
}

message ListVKBelegSalechannelsResponse {
    int32 page = 1;
    int32 page_size = 2;
    repeated SalechannelItem items = 3;
}

message ListVKBelegPositionsPulseRequest {
    oneof time_frame {
        TimeRange range = 1;
        google.protobuf.Duration duration = 2;
        TimeFramePreset range_shortcut = 3;
    }
    int32 page_size = 4;
    int32 page = 5;
    int32 mandant = 6;
    repeated VKBelegart belegart_items = 7;
    string kundengruppe = 8;
    string supplier = 9;
    string artikelnummer = 10;
    string search = 11;
}

message VKBelegProductPulseItem {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    string sku = 4;
    string bezeichnung = 5;
    string variante = 6;
    string supplier = 7;
    string versandklasse = 8; 
    int32 bestellungen = 9;
    double menge = 10;
    double mittlerer_ek = 11; 
    double umsatz = 12;
    double roherloes = 13;
}

message ListVKBelegPositionsPulseResponse {
    int32 page_size = 1;
    int32 page = 2;
    repeated VKBelegProductPulseItem items = 3;
}

message GetVKBelegPulseRequest {
    int32 mandant = 1;
    oneof time_frame {
        TimeRange range = 2;
        google.protobuf.Duration duration = 3;
        TimeFramePreset range_shortcut = 4;
    }
    repeated VKBelegart belegart_items = 5;
}

message VKBelegPulseV1 {
    int32 mandant = 1;
    string kundengruppe = 2;
    string kundengruppe_name = 3;
    int32 orders = 4;
    double turnover = 5;
    double product_qty = 6;
    double product_turnover = 7;
    double product_profit = 8;

    message Metrics {
        int32 orders = 1;
        double turnover = 2;
        double product_qty = 3;
        double product_turnover = 4;
        double product_profit = 5;
    }

    message Filters {
        int32 mandant = 1;
        TimeRange range = 2;
        repeated string belegart_items = 3;
    }
}

message GetVKBelegPulseResponse {
    int32 page_size = 1;
    int32 page = 2;
    int32 mandant = 3;
    repeated VKBelegPulseV1 items = 4;
    VKBelegPulseV1.Metrics metrics = 5;
    VKBelegPulseV1.Filters filters = 6;
}

message FetchNewestVKBelegEventsRequest {
    int32 mandant = 1;
    int64 bel_id = 2;
}

message FetchNewestVKBelegEventsResponse {
    repeated int64 bel_ids = 1;
}

message EmitVKBelegEventsRequest {
    int32 mandant = 3;
    int64 bel_id = 4;
}

message EmitVKBelegEventsResponse {
    repeated EventItemVkBeleg events = 1;
}

enum EventTopic {
    EVENT_TOPIC_UNKNOW_UNSPECIFIED = 0;
    EVENT_TOPIC_VK_BELEG_CREATED = 1;
    EVENT_TOPIC_VK_BELEG_PAYED = 2;
    EVENT_TOPIC_VK_BELEG_OVER_PAYED = 3;
    EVENT_TOPIC_VK_BELEG_UNDER_PAYED = 4;
    EVENT_TOPIC_VK_BELEG_MAHNSTUFE_1 = 5;
    // EVENT_VK_BELEG_TOPIC_MAHNSTUFE_2 = 6;
    // EVENT_VK_BELEG_TOPIC_MAHNSTUFE_3 = 7;
    EVENT_TOPIC_VK_BELEG_CANCELD = 8;
    EVENT_TOPIC_VK_BELEG_FULFILLED = 9;
    EVENT_TOPIC_FEED_FILE_CREATED = 10;
}

message EventItemVkBeleg {
    string id = 1;
    EventTopic topic = 2;
    int32 mandant = 3;
    int64 bel_id = 4;
    google.protobuf.Timestamp created_at = 5;
}

message ListVKBelegEventsRequest{
    int32 mandant = 1;
    int64 bel_id = 2;
    string page_token = 3;
}

message ListVKBelegEventsResponse {
    repeated EventItemVkBeleg events = 1;
    string page_token = 2;
}

message GetVKBelegEventRequest {
    int32 mandant = 1;
    int64 bel_id = 2;
    EventTopic topic = 3;
}

// EVENT_VK_BELEG_TOPIC_CREATED
message EventVkBelegCreated {
    EventTopic topic = 1;
    VKBelegV2 beleg = 2;
    repeated VKBelegePositionenV2 positions = 3;
    repeated VKBelegeWarehousePositionV1 warehouse_positions = 4;
    google.protobuf.Timestamp beleg_created_at = 5;
    google.protobuf.Timestamp created_at = 6;
}

// EVENT_VK_BELEG_TOPIC_PAYED
message EventVkBelegPayed {
    EventTopic topic = 1;
    int32 mandant = 2;
    int64 bel_id = 3;
    int64 vor_id = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string referenznummer = 7;
    string zahlungskond = 8;
    string user_zahlungsreferenz = 9;
    google.protobuf.Timestamp created_at = 10;
}

// EVENT_VK_BELEG_TOPIC_OVER_PAYED
message EventVkBelegOverPayed {
    EventTopic topic = 1;
    int32 mandant = 2;
    int64 bel_id = 3;
    int64 vor_id = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string referenznummer = 7;
    string zahlungskond = 8;
    string user_zahlungsreferenz = 9;
    google.protobuf.Timestamp created_at = 10;
}

// EVENT_VK_BELEG_TOPIC_UNDER_PAYED
message EventVkBelegUnderPayed {
    EventTopic topic = 1;
    int32 mandant = 2;
    int64 bel_id = 3;
    int64 vor_id = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string referenznummer = 7;
    string zahlungskond = 8;
    string user_zahlungsreferenz = 9;
    google.protobuf.Timestamp created_at = 10;
}

// EVENT_VK_BELEG_MAHNSTUFE_1
message EventVkBelegMahnstufe1 {
    EventTopic topic = 1;
    int32 mandant = 2;
    int64 bel_id = 3;
    int64 vor_id = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string referenznummer = 7;
    string zahlungskond = 8;
    string user_zahlungsreferenz = 9;
    google.protobuf.Timestamp created_at = 10;
}

// EVENT_TOPIC_VK_BELEG_CANCELD
message EventVkBelegCanceled {
    EventTopic topic = 1;
    int32 mandant = 2;
    int64 bel_id = 3;
    int64 vor_id = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string referenznummer = 7;
    string zahlungskond = 8;
    string user_zahlungsreferenz = 9;
    string user_kopftext = 10;
    repeated string user_tags = 11;
    google.protobuf.Timestamp created_at = 12;
}

// EVENT_TOPIC_FEED_FILE_CREATED
message EventFeedFileCreated {
    EventTopic topic = 1;
    string feed = 2;
    string supplier = 3;
    string name = 4;
    string uri = 5;
    int64 size = 6;
    string size_humanized = 7;
    google.protobuf.Timestamp created_at = 8;
}

message GetVKBelegEventResponse {
    oneof event {
        EventVkBelegCreated created = 1;
        EventVkBelegPayed payed = 2;
        EventVkBelegOverPayed over_payed = 3;
        EventVkBelegUnderPayed under_payed = 4;
        EventVkBelegMahnstufe1 mahnstufe_1 = 5;
        // EventVkBelegMahnstufe1 mahnstufe_2 = 6;
        // EventVkBelegMahnstufe1 mahnstufe_3 = 7;
        EventVkBelegCanceled canceled = 8;
    }
}

message PushEventRequest {
    string id = 1;
}

message PushEventResponse {
    Event event = 1;
}

message GetEventRequest {
    string id = 1;
}

message GetEventResponse {
    Event event = 1;
}

message DeleteEventRequest {
    string id = 1;
}

message DeleteEventResponse {
    Event event = 1;
}

enum PayedStatus {
    PAYED_STATUS_UNKNOW_UNSPECIFIED = 0;
    PAYED_STATUS_NOT_PAID = 1;
    PAYED_STATUS_PAID = 2;
    PAYED_STATUS_UNDERPAID = 3;
    PAYED_STATUS_OVERPAID = 4;
}

enum MahnstufeStatus {
    MAHNSTUFE_STATUS_UNKNOW_UNSPECIFIED = 0;
    MAHNSTUFE_STATUS_0 = 1;
    MAHNSTUFE_STATUS_1 = 2;
    MAHNSTUFE_STATUS_2 = 3;
    MAHNSTUFE_STATUS_3 = 4;
}

message VKBelegV2 {
    int32 mandant = 1;
    int64 vor_id = 2;
    int64 bel_id = 3;
    string belegkennzeichen = 4;
    string belegart = 5;
    string kundengruppe = 6;
    string kopftext = 7;
    string referenznummer = 8;
    string lieferbedingung = 9;
    string user_kom_bearbeiter = 10;
    google.protobuf.Timestamp user_kom_zeit = 11;
    string user_zahlungsreferenz = 12;
    google.protobuf.Timestamp user_cd = 13;
    string user_belegjahr_belegnummer = 14;
    double nettobetrag_ew = 15;
    double bruttobetrag_ew = 16;
    string versand = 17;
    PayedStatus user_bezahlt = 18;
    string zahlungskond = 19;
    string inkassoart = 20;
    double betrag = 21;
    string email = 22;
    string telefon = 23;
    string a0_land = 24;
    string a1_land = 25;
    string memo = 26;
    repeated string tags = 27;
    MahnstufeStatus user_mahnstufe = 28;
    double roherloes = 29;
    repeated string suppliers = 30;
    string wkz = 31;
}

message VKBelegePositionenV2 {
    int64 bel_pos_id = 1;
    int64 vor_pos_id = 2;
    string position = 3;
    string artikelnummer = 4;
    int32 auspraegung_id = 5;
    string bezeichnung_1 = 6;
    string bezeichnung_2 = 7;
    double gesamtpreis_intern_ew = 8;
    double einzelpreis = 9;
    double mittlerer_ek = 10;
    double roherloes = 11;
    double menge = 12;
    bool ist_erledigt = 13;
    string mengeneinheit = 14;
    string menge_vp_einheit = 15;
    bool user_sonepar_bestellt = 16;
    google.protobuf.Timestamp user_sonepar_bestellt_markiert_datum = 17;
    bool user_ep_bestellt = 18;
    google.protobuf.Timestamp user_ep_bestellt_markiert_datum = 19;
    string user_versandklasse = 20;
    string user_sonepar_artikel = 21;
    string user_zulieferer_code = 22;
    string user_zulieferer_artikelnummer = 23;
    double user_zulieferer_bestand = 24;
}

message VKBelegeWarehousePositionV1 {
    int32 mandant = 1;
    string artikelnummer = 2;
    int32 auspraegung_id = 3;
    double menge = 4;
    string mengeneinheit = 5;
    string menge_vp_einheit = 6;
    double menge_vp_umrechnung = 7;
    double lagerbestand = 8;
    double dispobestand = 9;
}

message GetVKBelegV2Request {
    int32 mandant = 1;
    int64 bel_id = 2;
}

message GetVKBelegV2Response {
    VKBelegV2 beleg = 1;
    repeated VKBelegePositionenV2 positions = 2;
    repeated VKBelegeWarehousePositionV1 warehouse_positions = 3;
}

message GetApiKeyRequest {
    string id = 1;
}

message GetApiKeyResponse {
    ApiKey api_key = 1;
}

message ListApiKeysFilter {
    enum Field {
        FIELD_ID_UNSPECIFIED = 0;
        FIELD_USERNAME = 1;
        FIELD_EMAIL = 2;
        FIELD_SECRET = 3;
        FIELD_BY_USER_NAME = 4;
        FIELD_CREATED_AT = 5;
    }

    Field field = 1;
    string value = 2;
    Operator operator = 3;
}

message ListApiKeysRequest {
    enum OrderBy {
        ORDER_BY_ID_UNSPECIFIED = 0;
        ORDER_BY_CREATED_AT = 1;
    }

    int32 page_size = 1;
    string page_next = 2;
    string page_previous = 3;
    OrderBy order_by = 4;
    Direction direction = 5;
    repeated ListApiKeysFilter filters = 6;
}

message ListApiKeysResponse {
    repeated ApiKey api_keys = 1;
    string page_token = 2;
}

message CreateApiKeyRequest {
    string username = 1;
    string email = 2;
    repeated Scope scopes = 3;
}

message CreateApiKeyResponse {
    ApiKey api_key = 1;
}

message DeleteApiKeyRequest {
    string id = 1;
}

message DeleteApiKeyResponse {
    ApiKey api_key = 1;
}

message UpdateScopesByApiKeyRequest {
    string id = 1;
    repeated string scopes = 2;
}

message UpdateScopesByApiKeyResponse {
    ApiKey api_key = 1;
}

message UpdateAmazonItemLeadTimeToShipItem {
    int32 mandant = 1;
    int64 item_id = 2;
    int32 lead_time_to_ship = 3;
}

message UpdateAmazonLeadTimesRequest {
    repeated UpdateAmazonItemLeadTimeToShipItem items = 1;
}

message UpdateAmazonLeadTimesResponse {
    bool is_success = 1;
}

message GetAmazonItemRequest {
    int32 mandant = 1;
    int64 item_id = 2;
}

message GetAmazonItemResponse {
    LBAmazonItem item = 1;
}

message GetActionRequest {
    string id = 1;
}

message GetActionResponse {
    Action action = 1;
}

message ListActionsFilter {
    enum Field {
        FIELD_ID_UNSPECIFIED = 0;
        FIELD_TYPE = 1;
        FIELD_TABLE = 2;
        FIELD_BY_USER_ID = 3;
        FIELD_BY_USER_NAME = 4;
        FIELD_CREATED_AT = 5;
    }

    Field field = 1;
    string value = 2;
    Operator operator = 3;
}

message ListActionsRequest {
    enum OrderBy {
        ORDER_BY_ID_UNSPECIFIED = 0;
        ORDER_BY_CREATED_AT = 1;
    }

    int32 page_size = 1;
    string page_next = 2;
    string page_previous = 3;
    OrderBy order_by = 4;
    Direction direction = 5;
    repeated ListActionsFilter filters = 6;
}

message ListActionsResponse {
    repeated Action actions = 1;
    string page_token = 2;
}

message InfoRequest {}

message InfoResponse {
    string version = 1;
}